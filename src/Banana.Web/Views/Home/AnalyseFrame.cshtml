
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>AnalyseFrame</title>
</head>
<body>
    <input type="hidden" id="u" value="@ViewData["url"]" />
    <input type="hidden" id="g" value="@ViewData["gkey"]" />
    <input type="hidden" id="t" value="@ViewData["timestamp"]" />
    <input type="hidden" id="s" value="@ViewData["sign"]" />
    <div id="video" style="width: 100%;height: 100%; position: absolute;top: 0;bottom: 0;left:0;right:0;"></div>
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="~/ckplayer/ckplayer.js" charset="utf-8"></script>
    <script>
        $(function () {
            $.ajax({
                url: "/analyse/core",
                method: "post",
                data: { "u": $("#u").val(), "g": $("#g").val(), "t": $("#t").val(), "s": $("#s").val() },
                beforeSend: function () {
                    //前置等待
                },
                success: function (response) {
                    if (response.errorCode == 0) {
                        var b = {
                            f: response.urls,
                            c: 0,
                            s: 0,
                            p: 1,
                            b: 1,
                        };
                        var c = {
                            bgcolor: '#000',
                            allowFullScreen: true,
                            allowScriptAccess: 'always',
                            wmode: 'transparent'
                        };
                        CKobject.embedSWF('/ckplayer/ckplayer.swf', 'video', 'ck', '100%', '100%', b, c)
                    } else if (response.errorCode == -10001) {
                        parent.location.href = '/analyse/' + $("#u").val();
                    } else {
                        alert(response.msg);
                    }
                },
                error: function () {
                    alert("服务器出现了一个错误。");
                }
            });
        })
    </script>
</body>
</html>
